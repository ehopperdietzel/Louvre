<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Louvre: The wp_viewport interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Louvre<span id="projectnumber">&#160;v1.0</span>
   </div>
   <div id="projectbrief">C++ library to create Wayland Compositors</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__iface__wp__viewport.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">The wp_viewport interface</div></div>
</div><!--header-->
<div class="contents">

<p>An additional interface to a wl_surface object, which allows the client to specify the cropping and scaling of the surface contents.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:structwp__viewport__interface"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iface__wp__viewport.html#structwp__viewport__interface">wp_viewport_interface</a></td></tr>
<tr class="separator:structwp__viewport__interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga2f2d82d9467886da037d7e0d176b987c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iface__wp__viewport.html#ga2f2d82d9467886da037d7e0d176b987c">WP_VIEWPORT_DESTROY_SINCE_VERSION</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga2f2d82d9467886da037d7e0d176b987c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4650dfb014c46666d6394b83f47db1d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iface__wp__viewport.html#ga4650dfb014c46666d6394b83f47db1d9">WP_VIEWPORT_SET_DESTINATION_SINCE_VERSION</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga4650dfb014c46666d6394b83f47db1d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6a2328bffea9120b76d01f1389c60641"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iface__wp__viewport.html#ga6a2328bffea9120b76d01f1389c60641">WP_VIEWPORT_SET_SOURCE_SINCE_VERSION</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga6a2328bffea9120b76d01f1389c60641"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >An additional interface to a wl_surface object, which allows the client to specify the cropping and scaling of the surface contents. </p>
<p >This interface works with two concepts: the source rectangle (src_x, src_y, src_width, src_height), and the destination size (dst_width, dst_height). The contents of the source rectangle are scaled to the destination size, and content outside the source rectangle is ignored. This state is double-buffered, and is applied on the next wl_surface.commit.</p>
<p >The two parts of crop and scale state are independent: the source rectangle, and the destination size. Initially both are unset, that is, no scaling is applied. The whole of the current wl_buffer is used as the source, and the surface size is as defined in wl_surface.attach.</p>
<p >If the destination size is set, it causes the surface size to become dst_width, dst_height. The source (rectangle) is scaled to exactly this size. This overrides whatever the attached wl_buffer size is, unless the wl_buffer is NULL. If the wl_buffer is NULL, the surface has no content and therefore no size. Otherwise, the size is always at least 1x1 in surface local coordinates.</p>
<p >If the source rectangle is set, it defines what area of the wl_buffer is taken as the source. If the source rectangle is set and the destination size is not set, then src_width and src_height must be integers, and the surface size becomes the source rectangle size. This results in cropping without scaling. If src_width or src_height are not integers and destination size is not set, the bad_size protocol error is raised when the surface state is applied.</p>
<p >The coordinate transformations from buffer pixel coordinates up to the surface-local coordinates happen in the following order:</p><ol type="1">
<li>buffer_transform (wl_surface.set_buffer_transform)</li>
<li>buffer_scale (wl_surface.set_buffer_scale)</li>
<li>crop and scale (wp_viewport.set*) This means, that the source rectangle coordinates of crop and scale are given in the coordinates after the buffer transform and scale, i.e. in the coordinates that would be the surface-local coordinates if the crop and scale was not applied.</li>
</ol>
<p >If src_x or src_y are negative, the bad_value protocol error is raised. Otherwise, if the source rectangle is partially or completely outside of the non-NULL wl_buffer, then the out_of_buffer protocol error is raised when the surface state is applied. A NULL wl_buffer does not raise the out_of_buffer error.</p>
<p >If the wl_surface associated with the wp_viewport is destroyed, all wp_viewport requests except 'destroy' raise the protocol error no_surface.</p>
<p >If the wp_viewport object is destroyed, the crop and scale state is removed from the wl_surface. The change will be applied on the next wl_surface.commit. </p>
<hr/><h2 class="groupheader">Class Documentation</h2>
<a name="structwp__viewport__interface" id="structwp__viewport__interface"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structwp__viewport__interface">&#9670;&nbsp;</a></span>wp_viewport_interface</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct wp_viewport_interface</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><table class="memberdecls">
<tr><td colspan="2"><h3>Public Attributes</h3></td></tr>
<tr class="memitem:a975ae44b18bb73b51561d7b29bace875"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iface__wp__viewport.html#a975ae44b18bb73b51561d7b29bace875">destroy</a> )(struct wl_client *client, struct wl_resource *resource)</td></tr>
<tr class="memdesc:a975ae44b18bb73b51561d7b29bace875"><td class="mdescLeft">&#160;</td><td class="mdescRight">remove scaling and cropping from the surface  <a href="group__iface__wp__viewport.html#a975ae44b18bb73b51561d7b29bace875">More...</a><br /></td></tr>
<tr class="separator:a975ae44b18bb73b51561d7b29bace875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe3743a95f6c50a0af09d397ae98c6ea"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iface__wp__viewport.html#abe3743a95f6c50a0af09d397ae98c6ea">set_destination</a> )(struct wl_client *client, struct wl_resource *resource, int32_t width, int32_t height)</td></tr>
<tr class="memdesc:abe3743a95f6c50a0af09d397ae98c6ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the surface size for scaling  <a href="group__iface__wp__viewport.html#abe3743a95f6c50a0af09d397ae98c6ea">More...</a><br /></td></tr>
<tr class="separator:abe3743a95f6c50a0af09d397ae98c6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a921a113d53ec5415d8283f737f0cb551"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iface__wp__viewport.html#a921a113d53ec5415d8283f737f0cb551">set_source</a> )(struct wl_client *client, struct wl_resource *resource, wl_fixed_t x, wl_fixed_t y, wl_fixed_t width, wl_fixed_t height)</td></tr>
<tr class="memdesc:a921a113d53ec5415d8283f737f0cb551"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the source rectangle for cropping  <a href="group__iface__wp__viewport.html#a921a113d53ec5415d8283f737f0cb551">More...</a><br /></td></tr>
<tr class="separator:a921a113d53ec5415d8283f737f0cb551"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Member Data Documentation</h4>
<a id="a975ae44b18bb73b51561d7b29bace875" name="a975ae44b18bb73b51561d7b29bace875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a975ae44b18bb73b51561d7b29bace875">&#9670;&nbsp;</a></span>destroy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* destroy) (struct wl_client *client, struct wl_resource *resource)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>remove scaling and cropping from the surface </p>
<p >The associated wl_surface's crop and scale state is removed. The change is applied on the next wl_surface.commit. </p>

</div>
</div>
<a id="abe3743a95f6c50a0af09d397ae98c6ea" name="abe3743a95f6c50a0af09d397ae98c6ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe3743a95f6c50a0af09d397ae98c6ea">&#9670;&nbsp;</a></span>set_destination</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* set_destination) (struct wl_client *client, struct wl_resource *resource, int32_t width, int32_t height)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the surface size for scaling </p>
<p >Set the destination size of the associated wl_surface. See wp_viewport for the description, and relation to the wl_buffer size.</p>
<p >If width is -1 and height is -1, the destination size is unset instead. Any other pair of values for width and height that contains zero or negative values raises the bad_value protocol error.</p>
<p >The crop and scale state is double-buffered state, and will be applied on the next wl_surface.commit. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">width</td><td>surface width </td></tr>
    <tr><td class="paramname">height</td><td>surface height </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a921a113d53ec5415d8283f737f0cb551" name="a921a113d53ec5415d8283f737f0cb551"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a921a113d53ec5415d8283f737f0cb551">&#9670;&nbsp;</a></span>set_source</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* set_source) (struct wl_client *client, struct wl_resource *resource, wl_fixed_t x, wl_fixed_t y, wl_fixed_t width, wl_fixed_t height)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the source rectangle for cropping </p>
<p >Set the source rectangle of the associated wl_surface. See wp_viewport for the description, and relation to the wl_buffer size.</p>
<p >If all of x, y, width and height are -1.0, the source rectangle is unset instead. Any other set of values where width or height are zero or negative, or x or y are negative, raise the bad_value protocol error.</p>
<p >The crop and scale state is double-buffered state, and will be applied on the next wl_surface.commit. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>source rectangle x </td></tr>
    <tr><td class="paramname">y</td><td>source rectangle y </td></tr>
    <tr><td class="paramname">width</td><td>source rectangle width </td></tr>
    <tr><td class="paramname">height</td><td>source rectangle height </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga2f2d82d9467886da037d7e0d176b987c" name="ga2f2d82d9467886da037d7e0d176b987c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2f2d82d9467886da037d7e0d176b987c">&#9670;&nbsp;</a></span>WP_VIEWPORT_DESTROY_SINCE_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WP_VIEWPORT_DESTROY_SINCE_VERSION&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga4650dfb014c46666d6394b83f47db1d9" name="ga4650dfb014c46666d6394b83f47db1d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4650dfb014c46666d6394b83f47db1d9">&#9670;&nbsp;</a></span>WP_VIEWPORT_SET_DESTINATION_SINCE_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WP_VIEWPORT_SET_DESTINATION_SINCE_VERSION&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga6a2328bffea9120b76d01f1389c60641" name="ga6a2328bffea9120b76d01f1389c60641"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6a2328bffea9120b76d01f1389c60641">&#9670;&nbsp;</a></span>WP_VIEWPORT_SET_SOURCE_SINCE_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WP_VIEWPORT_SET_SOURCE_SINCE_VERSION&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
